package com.example.liveharshit.booklistingapp;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

public class QueryUtils {

    private QueryUtils () {

    }


    private static final String SAMPLE_JSON_RESPONSE = "{ \"kind\": \"books#volumes\", \"totalItems\": 3981, \"items\": [ { \"kind\": \"books#volume\", \"id\": \"qBxhhMkSLRMC\", \"etag\": \"AKVsOsYwK2Q\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/qBxhhMkSLRMC\", \"volumeInfo\": { \"title\": \"Trippings in Author-land\", \"authors\": [ \"Emily Chubbuck Judson\" ], \"publishedDate\": \"1846\", \"industryIdentifiers\": [ { \"type\": \"OTHER\", \"identifier\": \"HARVARD:32044019377837\" } ], \"readingModes\": { \"text\": false, \"image\": true }, \"pageCount\": 281, \"printType\": \"BOOK\", \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"0.2.1.0.full.1\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=qBxhhMkSLRMC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=qBxhhMkSLRMC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=qBxhhMkSLRMC&pg=PA98&dq=flowers+inauthor&hl=&cd=1&source=gbs_api\", \"infoLink\": \"https://play.google.com/store/books/details?id=qBxhhMkSLRMC&source=gbs_api\", \"canonicalVolumeLink\": \"https://market.android.com/details?id=book-qBxhhMkSLRMC\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"FREE\", \"isEbook\": true, \"buyLink\": \"https://play.google.com/store/books/details?id=qBxhhMkSLRMC&rdid=book-qBxhhMkSLRMC&rdot=1&source=gbs_api\" }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"ALL_PAGES\", \"embeddable\": true, \"publicDomain\": true, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false, \"downloadLink\": \"http://books.google.co.in/books/download/Trippings_in_Author_land.epub?id=qBxhhMkSLRMC&hl=&output=epub&source=gbs_api\" }, \"pdf\": { \"isAvailable\": true, \"downloadLink\": \"http://books.google.co.in/books/download/Trippings_in_Author_land.pdf?id=qBxhhMkSLRMC&hl=&output=pdf&sig=ACfU3U2ecOY2qN_n_Yb4XgK-xWCBidj18g&source=gbs_api\" }, \"webReaderLink\": \"http://play.google.com/books/reader?id=qBxhhMkSLRMC&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"FULL_PUBLIC_DOMAIN\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"The trees budded and leaved ; \\u003cb\\u003eflowers\\u003c/b\\u003e bloomed and faded, leaving their places \\u003cbr\\u003e\\nto brighter \\u003cb\\u003eflowers\\u003c/b\\u003e still ; the brooks frolicked and jostled their tiny drops together ; \\u003cbr\\u003e\\nand the birds answered back from ten thousand fresh green coverts with startling\\u003cbr\\u003e\\n ...\" } }, { \"kind\": \"books#volume\", \"id\": \"ELARIo1Xb1sC\", \"etag\": \"cOyGW9z8U4M\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/ELARIo1Xb1sC\", \"volumeInfo\": { \"title\": \"Freedom's Orator\", \"subtitle\": \"Mario Savio and the Radical Legacy of the 1960s\", \"authors\": [ \"Robert Cohen\" ], \"publisher\": \"Oxford University Press\", \"publishedDate\": \"2009-08-27\", \"description\": \"Here is the first biography of Mario Savio, the brilliant leader of Berkeley's Free Speech Movement, the largest and most disruptive student rebellion in American history. Savio risked his life to register black voters in Mississippi in the Freedom Summer of 1964 and did more than anyone to bring daring forms of non-violent protest from the civil rights movement to the struggle for free speech and academic freedom on American campuses. Drawing upon previously unavailable Savio papers, as well as oral histories from friends and fellow movement leaders, Freedom's Orator illuminates Mario's egalitarian leadership style, his remarkable eloquence, and the many ways he embodied the youthful idealism of the 1960s. The book also narrates, for the first time, his second phase of activism against \\\"Reaganite Imperialism\\\" in Central America and the corporatization of higher education. Including a generous selection of Savio's speeches, Freedom's Orator speaks with special relevance to a new generation of activists and to all who cherish the '60s and democratic ideals for which Savio fought so selflessly.\", \"industryIdentifiers\": [ { \"type\": \"ISBN_10\", \"identifier\": \"0199766347\" }, { \"type\": \"ISBN_13\", \"identifier\": \"9780199766345\" } ], \"readingModes\": { \"text\": true, \"image\": true }, \"pageCount\": 544, \"printType\": \"BOOK\", \"categories\": [ \"History\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": true, \"contentVersion\": \"0.7.3.0.preview.3\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=ELARIo1Xb1sC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=ELARIo1Xb1sC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=ELARIo1Xb1sC&pg=PA478&dq=flowers+inauthor&hl=&cd=2&source=gbs_api\", \"infoLink\": \"https://play.google.com/store/books/details?id=ELARIo1Xb1sC&source=gbs_api\", \"canonicalVolumeLink\": \"https://market.android.com/details?id=book-ELARIo1Xb1sC\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"FOR_SALE\", \"isEbook\": true, \"listPrice\": { \"amount\": 588.19, \"currencyCode\": \"INR\" }, \"retailPrice\": { \"amount\": 294.1, \"currencyCode\": \"INR\" }, \"buyLink\": \"https://play.google.com/store/books/details?id=ELARIo1Xb1sC&rdid=book-ELARIo1Xb1sC&rdot=1&source=gbs_api\", \"offers\": [ { \"finskyOfferType\": 1, \"listPrice\": { \"amountInMicros\": 5.8819E8, \"currencyCode\": \"INR\" }, \"retailPrice\": { \"amountInMicros\": 2.941E8, \"currencyCode\": \"INR\" } } ] }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"PARTIAL\", \"embeddable\": true, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Freedom_s_Orator-sample-epub.acsm?id=ELARIo1Xb1sC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"pdf\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Freedom_s_Orator-sample-pdf.acsm?id=ELARIo1Xb1sC&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"webReaderLink\": \"http://play.google.com/books/reader?id=ELARIo1Xb1sC&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"SAMPLE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"Mario Savio, “3 a.m.,” unpublished poem, October 19, 1977, copy \\u003cb\\u003ein author's\\u003c/b\\u003e \\u003cbr\\u003e\\npossession. Savio's poems are the only ... “I believe in the coming of dead \\u003cbr\\u003e\\n\\u003cb\\u003eflowers\\u003c/b\\u003e,” unpublished poem, copy \\u003cb\\u003ein author's\\u003c/b\\u003e possession. 6. Mario Savio to Art \\u003cbr\\u003e\\nGatti, March ...\" } }, { \"kind\": \"books#volume\", \"id\": \"ybt2ho-JH6QC\", \"etag\": \"Hpv+SsiYeUk\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/ybt2ho-JH6QC\", \"volumeInfo\": { \"title\": \"Chadha\", \"subtitle\": \"The Story of an Epic Constitutional Struggle\", \"authors\": [ \"Barbara Hinkson Craig\" ], \"publisher\": \"Univ of California Press\", \"publishedDate\": \"1990\", \"description\": \"Looks at how the case of a Kenyan student led to the ruling that the legislative veto in the Immigration and Naturalization Act is unconstitutional\", \"industryIdentifiers\": [ { \"type\": \"ISBN_10\", \"identifier\": \"0520069552\" }, { \"type\": \"ISBN_13\", \"identifier\": \"9780520069558\" } ], \"readingModes\": { \"text\": true, \"image\": true }, \"pageCount\": 262, \"printType\": \"BOOK\", \"categories\": [ \"History\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"0.0.2.0.preview.3\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=ybt2ho-JH6QC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=ybt2ho-JH6QC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=ybt2ho-JH6QC&pg=PA244&dq=flowers+inauthor&hl=&cd=3&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=ybt2ho-JH6QC&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/Chadha.html?hl=&id=ybt2ho-JH6QC\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"PARTIAL\", \"embeddable\": true, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Chadha-sample-epub.acsm?id=ybt2ho-JH6QC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=ybt2ho-JH6QC&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"SAMPLE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"Copy of Rodino letter, provided by Pohlmann, \\u003cb\\u003ein author's\\u003c/b\\u003e files. 43. Deportation \\u003cbr\\u003e\\nHearings, pp. ... 5. 49. Ibid., pp. 1-2. 50. Copy of Chadha's deportation notice \\u003cb\\u003ein\\u003c/b\\u003e \\u003cbr\\u003e\\n\\u003cb\\u003eauthor's\\u003c/b\\u003e files. 51. ... (Hereafter cited as \\u003cb\\u003eFlowers\\u003c/b\\u003e Hearings.) 3. Ibid., p. 140. 4. Ibid., \\u003cbr\\u003e\\np.\" } }, { \"kind\": \"books#volume\", \"id\": \"2SYhAQAAIAAJ\", \"etag\": \"V+5rNjVux6I\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/2SYhAQAAIAAJ\", \"volumeInfo\": { \"title\": \"Catalog of Copyright Entries\", \"subtitle\": \"Third series\", \"publishedDate\": \"1951\", \"industryIdentifiers\": [ { \"type\": \"OTHER\", \"identifier\": \"STANFORD:36105006281351\" } ], \"readingModes\": { \"text\": false, \"image\": true }, \"printType\": \"BOOK\", \"categories\": [ \"Copyright\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"1.1.1.0.full.1\", \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=2SYhAQAAIAAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=2SYhAQAAIAAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=2SYhAQAAIAAJ&pg=PA148&dq=flowers+inauthor&hl=&cd=4&source=gbs_api\", \"infoLink\": \"https://play.google.com/store/books/details?id=2SYhAQAAIAAJ&source=gbs_api\", \"canonicalVolumeLink\": \"https://market.android.com/details?id=book-2SYhAQAAIAAJ\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"FREE\", \"isEbook\": true, \"buyLink\": \"https://play.google.com/store/books/details?id=2SYhAQAAIAAJ&rdid=book-2SYhAQAAIAAJ&rdot=1&source=gbs_api\" }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"ALL_PAGES\", \"embeddable\": true, \"publicDomain\": true, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=2SYhAQAAIAAJ&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"FULL_PUBLIC_DOMAIN\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"DISNEY (WALT) PRODUCTIONS. Alice in Wonderland meets the enchanted \\u003cbr\\u003e\\n\\u003cb\\u003eflowers\\u003c/b\\u003e. ... Burbank, Calif.; 5Sep51; K30137. White Rabbit and the \\u003cb\\u003eflowers\\u003c/b\\u003e. ... 7 x \\u003cbr\\u003e\\n7 \\u003cb\\u003ein. Author\\u003c/b\\u003e of reproduction: Brown and Bigelow. © Brown & Bigelow, St. Paul; ...\" } }, { \"kind\": \"books#volume\", \"id\": \"beBEDwAAQBAJ\", \"etag\": \"yAjmn0yUey4\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/beBEDwAAQBAJ\", \"volumeInfo\": { \"title\": \"Rise to Hope\", \"subtitle\": \"She Fell From Heaven... Now She's Back\", \"authors\": [ \"A.J. Flowers\" ], \"publisher\": \"A.J. Flowers\", \"publishedDate\": \"2017-10-29\", \"description\": \"To become Queen, she had to fall from heaven. But now that she's back, can she take the throne? Standalone Capable! In the stunning sequel to Fallen to Grace, Azrael must face a new world with new masters. She’s the Queen of Celestia—or so the Council of angels wish her to believe. The Seraphim, the true ruler of Celestia, holds Gabriel captive and tinkers with dark magic. Azrael must master her powers and her heart like never before in order to save Gabriel and lead a coup against the Seraphim. She’ll find an unlikely ally in a mutated girl who once took everything from her… Will it be in Azrael’s power to forgive?\", \"readingModes\": { \"text\": true, \"image\": true }, \"pageCount\": 248, \"printType\": \"BOOK\", \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"1.1.1.0.preview.3\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=beBEDwAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=beBEDwAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=beBEDwAAQBAJ&printsec=frontcover&dq=flowers+inauthor&hl=&cd=5&source=gbs_api\", \"infoLink\": \"https://play.google.com/store/books/details?id=beBEDwAAQBAJ&source=gbs_api\", \"canonicalVolumeLink\": \"https://market.android.com/details?id=book-beBEDwAAQBAJ\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"FOR_SALE\", \"isEbook\": true, \"listPrice\": { \"amount\": 616.91, \"currencyCode\": \"INR\" }, \"retailPrice\": { \"amount\": 308.46, \"currencyCode\": \"INR\" }, \"buyLink\": \"https://play.google.com/store/books/details?id=beBEDwAAQBAJ&rdid=book-beBEDwAAQBAJ&rdot=1&source=gbs_api\", \"offers\": [ { \"finskyOfferType\": 1, \"listPrice\": { \"amountInMicros\": 6.1691E8, \"currencyCode\": \"INR\" }, \"retailPrice\": { \"amountInMicros\": 3.0846E8, \"currencyCode\": \"INR\" } } ] }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"PARTIAL\", \"embeddable\": true, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Rise_to_Hope-sample-epub.acsm?id=beBEDwAAQBAJ&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"pdf\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Rise_to_Hope-sample-pdf.acsm?id=beBEDwAAQBAJ&format=pdf&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"webReaderLink\": \"http://play.google.com/books/reader?id=beBEDwAAQBAJ&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"SAMPLE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"To become Queen, she had to fall from heaven.\" } }, { \"kind\": \"books#volume\", \"id\": \"pIs9Em38dAoC\", \"etag\": \"bl+9ze2Hb60\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/pIs9Em38dAoC\", \"volumeInfo\": { \"title\": \"The Play of Daniel Keyes' Flowers for Algernon\", \"authors\": [ \"Bert Coules\", \"Daniel Keyes\" ], \"publisher\": \"Heinemann\", \"publishedDate\": \"1993\", \"description\": \"The Heinemann Plays series offers contemporary drama and classic plays in durable classroom editions. Many have large casts and an equal mix of boy and girl parts. This play is a dramatization of Daniel Keyes's story about a retarded adult who desperately wants to be able to read and write.\", \"industryIdentifiers\": [ { \"type\": \"ISBN_10\", \"identifier\": \"0435232932\" }, { \"type\": \"ISBN_13\", \"identifier\": \"9780435232931\" } ], \"readingModes\": { \"text\": false, \"image\": true }, \"pageCount\": 128, \"printType\": \"BOOK\", \"categories\": [ \"English drama\" ], \"averageRating\": 4.5, \"ratingsCount\": 3, \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"preview-1.0.0\", \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=pIs9Em38dAoC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=pIs9Em38dAoC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=pIs9Em38dAoC&printsec=frontcover&dq=flowers+inauthor&hl=&cd=6&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=pIs9Em38dAoC&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/The_Play_of_Daniel_Keyes_Flowers_for_Alg.html?hl=&id=pIs9Em38dAoC\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"PARTIAL\", \"embeddable\": true, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=pIs9Em38dAoC&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"SAMPLE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"This is a powerful dramatisation of Daniel Keyes's perceptive and sad novel.\" } }, { \"kind\": \"books#volume\", \"id\": \"EWhGAQAAMAAJ\", \"etag\": \"OIwqAm9vLOA\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/EWhGAQAAMAAJ\", \"volumeInfo\": { \"title\": \"The Naturalist\", \"publishedDate\": \"1888\", \"industryIdentifiers\": [ { \"type\": \"OTHER\", \"identifier\": \"UCBK:C063039377\" } ], \"readingModes\": { \"text\": false, \"image\": false }, \"printType\": \"BOOK\", \"categories\": [ \"Geology\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"0.0.2.0.preview.0\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=EWhGAQAAMAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=EWhGAQAAMAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=EWhGAQAAMAAJ&q=flowers+inauthor&dq=flowers+inauthor&hl=&cd=7&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=EWhGAQAAMAAJ&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/The_Naturalist.html?hl=&id=EWhGAQAAMAAJ\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"NO_PAGES\", \"embeddable\": false, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=EWhGAQAAMAAJ&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"NONE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"[Meligethes erythropus Gyll., abundant in Langworth Wood near Lincoln, on \\u003cbr\\u003e\\nPotentilla tormentilla, and sparingly on strawberry \\u003cb\\u003eflowers in author's\\u003c/b\\u003e garden at \\u003cbr\\u003e\\nLincoln; Repton and Chat Moss; and Castle Mill, near Manchester, on \\u003cbr\\u003e\\nGaleobdolon ...\" } }, { \"kind\": \"books#volume\", \"id\": \"3trRoAEACAAJ\", \"etag\": \"fTxPl9If9DE\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/3trRoAEACAAJ\", \"volumeInfo\": { \"title\": \"Sidewalk Flowers\", \"authors\": [ \"JonArno Lawson\", \"Sydney Smith\" ], \"publishedDate\": \"2015\", \"description\": \"A little girl collects wildflowers while walking through town with her father.\", \"industryIdentifiers\": [ { \"type\": \"ISBN_10\", \"identifier\": \"1554984319\" }, { \"type\": \"ISBN_13\", \"identifier\": \"9781554984312\" } ], \"readingModes\": { \"text\": false, \"image\": false }, \"pageCount\": 32, \"printType\": \"BOOK\", \"categories\": [ \"Juvenile Fiction\" ], \"averageRating\": 4.0, \"ratingsCount\": 3, \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"preview-1.0.0\", \"panelizationSummary\": { \"containsEpubBubbles\": false, \"containsImageBubbles\": false }, \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=3trRoAEACAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=3trRoAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=3trRoAEACAAJ&dq=flowers+inauthor&hl=&cd=8&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=3trRoAEACAAJ&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/Sidewalk_Flowers.html?hl=&id=3trRoAEACAAJ\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"NO_PAGES\", \"embeddable\": false, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=3trRoAEACAAJ&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"NONE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"A little girl collects wildflowers while walking through town with her father.\" } }, { \"kind\": \"books#volume\", \"id\": \"l4aXgduXgwUC\", \"etag\": \"lE3HdgrSMrs\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/l4aXgduXgwUC\", \"volumeInfo\": { \"title\": \"Full Many a Flower\", \"authors\": [ \"Ruby Dayton\" ], \"publisher\": \"iUniverse\", \"publishedDate\": \"2000-09-01\", \"description\": \"In the aftermath of the Great Depression, two year old Molly Whittaker's mother dies and leaves her in the care of her father, Truman, and her two brothers. Truman is desperate to keep his family together but when World War 2 begins, his older son joins and his younger son takes residence with his uncle. Truman and Molly roam the banks of the Mississippi river, he works clearing new ground and picking cotton until he gets a job operating a ferry. But, after a steamer collides with his vessel he fears for Molly's life and tries to find work elsewhere. Truman meets with a farm couple and they persuaded him to leave Molly with them. After a few years, Truman returns with a gypsy wife and her three adolescent sons. Molly is torn from a caring home and thrust into the clutches of this strange family. The Whittaker's take to the road as migrant field workers. A tent provides the only roof over their heads. Periodically, they miscalculate the harvest seasons and fine themselves destitute and near starvation. Truman soon discovers Manita ,his wife, is a soliciting prostitute and chooses to ignore the fact due to the much needed money. During a harrowing drunken episode, Manita pins Truman to the floor with a knife though his chest. Molly witnesses the event. At eight she is orphaned. Molly suffers bells palsy, leaving her face distorted. She refuses to speak. A mute, her teacher labels her incapable of learning and sends her home. Molly grows up illiterate. After the war is over, she comes to live with her brother and his wife, in the foothills of the Appalachian mountains. There, Molly triumphs over her years of adversity and becomes a prominent southern artist. She acquires an education and finds romance, love and stability..\", \"industryIdentifiers\": [ { \"type\": \"ISBN_13\", \"identifier\": \"9780595138135\" }, { \"type\": \"ISBN_10\", \"identifier\": \"0595138136\" } ], \"readingModes\": { \"text\": true, \"image\": true }, \"pageCount\": 372, \"printType\": \"BOOK\", \"categories\": [ \"Fiction\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"2.3.3.0.preview.3\", \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=l4aXgduXgwUC&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=l4aXgduXgwUC&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=l4aXgduXgwUC&pg=PA361&dq=flowers+inauthor&hl=&cd=9&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=l4aXgduXgwUC&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/Full_Many_a_Flower.html?hl=&id=l4aXgduXgwUC\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"PARTIAL\", \"embeddable\": true, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": true, \"acsTokenLink\": \"http://books.google.co.in/books/download/Full_Many_a_Flower-sample-epub.acsm?id=l4aXgduXgwUC&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\" }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=l4aXgduXgwUC&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"SAMPLE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"To further her understanding of writing she enrolled \\u003cb\\u003ein author\\u003c/b\\u003e Iean Ridley's fiction \\u003cbr\\u003e\\nwriting courses. There she begin Eull Many a \\u003cb\\u003eFlower\\u003c/b\\u003e, her first book of “faction”. In \\u003cbr\\u003e\\nthe aftermath of the Great Depression, two year old. 361 About the Author.\" } }, { \"kind\": \"books#volume\", \"id\": \"ACoUAAAAYAAJ\", \"etag\": \"PRmjsK4jKZg\", \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/ACoUAAAAYAAJ\", \"volumeInfo\": { \"title\": \"The Register of the Kentucky Historical Society\", \"publishedDate\": \"1991\", \"industryIdentifiers\": [ { \"type\": \"OTHER\", \"identifier\": \"UVA:X002525783\" } ], \"readingModes\": { \"text\": false, \"image\": false }, \"printType\": \"BOOK\", \"categories\": [ \"Kentucky\" ], \"maturityRating\": \"NOT_MATURE\", \"allowAnonLogging\": false, \"contentVersion\": \"0.0.1.0.preview.0\", \"imageLinks\": { \"smallThumbnail\": \"http://books.google.com/books/content?id=ACoUAAAAYAAJ&printsec=frontcover&img=1&zoom=5&source=gbs_api\", \"thumbnail\": \"http://books.google.com/books/content?id=ACoUAAAAYAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api\" }, \"language\": \"en\", \"previewLink\": \"http://books.google.co.in/books?id=ACoUAAAAYAAJ&q=flowers+inauthor&dq=flowers+inauthor&hl=&cd=10&source=gbs_api\", \"infoLink\": \"http://books.google.co.in/books?id=ACoUAAAAYAAJ&dq=flowers+inauthor&hl=&source=gbs_api\", \"canonicalVolumeLink\": \"https://books.google.com/books/about/The_Register_of_the_Kentucky_Historical.html?hl=&id=ACoUAAAAYAAJ\" }, \"saleInfo\": { \"country\": \"IN\", \"saleability\": \"NOT_FOR_SALE\", \"isEbook\": false }, \"accessInfo\": { \"country\": \"IN\", \"viewability\": \"NO_PAGES\", \"embeddable\": false, \"publicDomain\": false, \"textToSpeechPermission\": \"ALLOWED\", \"epub\": { \"isAvailable\": false }, \"pdf\": { \"isAvailable\": false }, \"webReaderLink\": \"http://play.google.com/books/reader?id=ACoUAAAAYAAJ&hl=&printsec=frontcover&source=gbs_api\", \"accessViewStatus\": \"NONE\", \"quoteSharingAllowed\": false }, \"searchInfo\": { \"textSnippet\": \"As a boy, Ruston \\u003cb\\u003eFlowers\\u003c/b\\u003e of Logan County enjoyed such nights and recalls that \\u003cbr\\u003e\\nhe \"used to take potatoes and put them in the ... \"Eunice McCarty interview, 9 \\u003cbr\\u003e\\nMarch 1987, \\u003cb\\u003ein author's\\u003c/b\\u003e possession; Oatts interview; Thomas F. Hamilton \\u003cbr\\u003e\\ninterview, ...\" } } ] }";

    public static ArrayList<BookList> extractBookList () {
        ArrayList<BookList> bookLists = new ArrayList<>();

        try {
            JSONObject baseJsonResponse = new JSONObject(SAMPLE_JSON_RESPONSE);
            JSONArray items = baseJsonResponse.getJSONArray("items");

            for(int i=0;i<items.length();i++) {
                JSONObject currentBook = items.getJSONObject(i);
                JSONObject volumeInfo = currentBook.getJSONObject("volumeInfo");
                String title = volumeInfo.getString("title");
                JSONArray author = volumeInfo.getJSONArray("authors");
                JSONObject firstAuthor = author.getJSONObject(0);
                String author_name = firstAuthor.getString("");
                String preview_url = volumeInfo.getString("previewLink");
                JSONObject accessInfo = currentBook.getJSONObject("accessInfo");
                JSONObject downloadInfo = accessInfo.getJSONObject("pdf");
                String isAvailable = downloadInfo.getString("isAvailable");
                String downloadUrl = downloadInfo.getString("downloadLink");
                String webReaderUrl = accessInfo.getString("webReaderLink");
                JSONObject imageLinks = volumeInfo.getJSONObject("imageLinks");
                String imageUrl = imageLinks.getString("smallThumbnail");

                try {
                    URL url = new URL(imageUrl);
                    try {
                        Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());

                        String downloadOrViewUrl;
                        String downloadAvailable;

                        if(isAvailable=="true") {
                            downloadOrViewUrl=downloadUrl;
                            downloadAvailable = "YES";
                        }else {
                            downloadOrViewUrl=webReaderUrl;
                            downloadAvailable = "NO";
                        }


                        BookList bookList = new BookList(bmp,title,author_name,preview_url,downloadAvailable,downloadOrViewUrl);
                        bookLists.add(bookList);

                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }

            }



        } catch (JSONException e) {
            e.printStackTrace();
        }




        return bookLists;
    }
}
